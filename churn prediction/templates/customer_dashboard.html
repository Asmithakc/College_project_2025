<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Dashboard - Retailer Churn Prediction</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body {
            background-image: url('/static/1.jpg');
            background-size: cover;
            background-position: center;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h2 class="text-center">Customer Dashboard</h2>
        <div class="text-end mb-4">
            <a href="/customer_login" class="btn btn-danger">Logout</a>
        </div>

        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Welcome, {{ customer.name }}!</h5>
                <p><strong>Email:</strong> {{ customer.email }}</p>
                <p><strong>Churn Status:</strong> {{ customer.churn_status }}</p>
            </div>
        </div>

        <h4>Churn Prediction</h4>
        <form action="/predict_churn" method="POST">
            <div class="mb-3">
                <label for="age" class="form-label">Age</label>
                <input type="number" class="form-control" id="age" name="age" required>
            </div>

            <div class="mb-3">
                <label for="gender" class="form-label">Gender (0 = Female, 1 = Male)</label>
                <input type="number" class="form-control" id="gender" name="gender" min="0" max="1" required>
            </div>

            <div class="mb-3">
                <label for="annual_income" class="form-label">Annual Income</label>
                <input type="number" class="form-control" id="annual_income" name="annual_income" required>
            </div>

            <div class="mb-3">
                <label for="total_spend" class="form-label">Total Spend</label>
                <input type="number" class="form-control" id="total_spend" name="total_spend" required>
            </div>

            <div class="mb-3">
                <label for="years_as_customer" class="form-label">Years as Customer</label>
                <input type="number" class="form-control" id="years_as_customer" name="years_as_customer" required>
            </div>

            <div class="mb-3">
                <label for="num_of_purchases" class="form-label">Number of Purchases</label>
                <input type="number" class="form-control" id="num_of_purchases" name="num_of_purchases" required>
            </div>

            <div class="mb-3">
                <label for="average_transaction_amount" class="form-label">Average Transaction Amount</label>
                <input type="number" class="form-control" id="average_transaction_amount" name="average_transaction_amount" required>
            </div>

            <div class="mb-3">
                <label for="num_of_returns" class="form-label">Number of Returns</label>
                <input type="number" class="form-control" id="num_of_returns" name="num_of_returns" required>
            </div>

            <div class="mb-3">
                <label for="num_of_support_contacts" class="form-label">Number of Support Contacts</label>
                <input type="number" class="form-control" id="num_of_support_contacts" name="num_of_support_contacts" required>
            </div>

            <div class="mb-3">
                <label for="satisfaction_score" class="form-label">Satisfaction Score</label>
                <input type="number" class="form-control" id="satisfaction_score" name="satisfaction_score" required>
            </div>

            <div class="mb-3">
                <label for="last_purchase_days_ago" class="form-label">Last Purchase (Days Ago)</label>
                <input type="number" class="form-control" id="last_purchase_days_ago" name="last_purchase_days_ago" required>
            </div>

            <div class="mb-3">
                <label for="email_opt_in" class="form-label">Email Opt-In (0 = No, 1 = Yes)</label>
                <input type="number" class="form-control" id="email_opt_in" name="email_opt_in" min="0" max="1" required>
            </div>

            <div class="mb-3">
                <label for="promotion_response" class="form-label">Promotion Response (0 = Ignored, 1 = Responded,2=Unsubscribed)</label>
                <input type="number" class="form-control" id="promotion_response" name="promotion_response" min="0" max="1" required>
            </div>

            <button type="submit" class="btn btn-primary">Predict Churn</button>
        </form>

        {% if prediction %}
        <div class="mt-4">
            <h5>Prediction Result:</h5>
            <p><strong>Churn Prediction:</strong> {{ prediction }}</p>
        </div>
        {% endif %}
    </div>
</body>
</html>
